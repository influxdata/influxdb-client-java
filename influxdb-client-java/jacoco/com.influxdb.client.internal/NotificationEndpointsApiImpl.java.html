<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>NotificationEndpointsApiImpl.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">The Java InfluxDB 2.x Client</a> &gt; <a href="index.source.html" class="el_package">com.influxdb.client.internal</a> &gt; <span class="el_source">NotificationEndpointsApiImpl.java</span></div><h1>NotificationEndpointsApiImpl.java</h1><pre class="source lang-java linenums">/*
 * The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the &quot;Software&quot;), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
package com.influxdb.client.internal;

import java.util.List;
import javax.annotation.Nonnull;
import javax.annotation.Nullable;

import com.influxdb.client.FindOptions;
import com.influxdb.client.NotificationEndpointsApi;
import com.influxdb.client.domain.HTTPNotificationEndpoint;
import com.influxdb.client.domain.HTTPNotificationEndpoint.MethodEnum;
import com.influxdb.client.domain.Label;
import com.influxdb.client.domain.LabelMapping;
import com.influxdb.client.domain.LabelResponse;
import com.influxdb.client.domain.LabelsResponse;
import com.influxdb.client.domain.NotificationEndpoint;
import com.influxdb.client.domain.NotificationEndpointBase;
import com.influxdb.client.domain.NotificationEndpointType;
import com.influxdb.client.domain.NotificationEndpointUpdate;
import com.influxdb.client.domain.NotificationEndpoints;
import com.influxdb.client.domain.PagerDutyNotificationEndpoint;
import com.influxdb.client.domain.SlackNotificationEndpoint;
import com.influxdb.client.service.NotificationEndpointsService;
import com.influxdb.internal.AbstractRestClient;
import com.influxdb.utils.Arguments;

import retrofit2.Call;

/**
 * @author Jakub Bednar (11/09/2019 09:23)
 */
final class NotificationEndpointsApiImpl extends AbstractRestClient implements NotificationEndpointsApi {

    private final NotificationEndpointsService service;

<span class="fc" id="L56">    NotificationEndpointsApiImpl(@Nonnull final NotificationEndpointsService service) {</span>

<span class="fc" id="L58">        Arguments.checkNotNull(service, &quot;notificationEndpointsService&quot;);</span>

<span class="fc" id="L60">        this.service = service;</span>
<span class="fc" id="L61">    }</span>

    @Nonnull
    @Override
    public SlackNotificationEndpoint createSlackEndpoint(@Nonnull final String name,
                                                         @Nonnull final String url,
                                                         @Nonnull final String orgID) {

<span class="nc" id="L69">        Arguments.checkNotNull(url, &quot;url&quot;);</span>

<span class="nc" id="L71">        return createSlackEndpoint(name, url, null, orgID);</span>
    }

    @Nonnull
    @Override
    public SlackNotificationEndpoint createSlackEndpoint(@Nonnull final String name,
                                                         @Nonnull final String url,
                                                         @Nullable final String token,
                                                         @Nonnull final String orgID) {

<span class="nc" id="L81">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L82">        Arguments.checkNonEmpty(orgID, &quot;orgID&quot;);</span>
<span class="nc" id="L83">        Arguments.checkNotNull(url, &quot;url&quot;);</span>

<span class="nc" id="L85">        SlackNotificationEndpoint endpoint = new SlackNotificationEndpoint();</span>
<span class="nc" id="L86">        endpoint.setType(NotificationEndpointType.SLACK);</span>
<span class="nc" id="L87">        endpoint.setUrl(url);</span>
<span class="nc" id="L88">        endpoint.setToken(token);</span>
<span class="nc" id="L89">        endpoint.orgID(orgID);</span>
<span class="nc" id="L90">        endpoint.setName(name);</span>
<span class="nc" id="L91">        endpoint.setStatus(NotificationEndpointBase.StatusEnum.ACTIVE);</span>

<span class="nc" id="L93">        return (SlackNotificationEndpoint) createEndpoint(endpoint);</span>
    }

    @Nonnull
    @Override
    public PagerDutyNotificationEndpoint createPagerDutyEndpoint(@Nonnull final String name,
                                                                 @Nonnull final String clientURL,
                                                                 @Nonnull final String routingKey,
                                                                 @Nonnull final String orgID) {

<span class="nc" id="L103">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L104">        Arguments.checkNonEmpty(clientURL, &quot;clientURL&quot;);</span>
<span class="nc" id="L105">        Arguments.checkNonEmpty(routingKey, &quot;routingKey&quot;);</span>
<span class="nc" id="L106">        Arguments.checkNonEmpty(orgID, &quot;orgID&quot;);</span>

<span class="nc" id="L108">        PagerDutyNotificationEndpoint endpoint = new PagerDutyNotificationEndpoint();</span>
<span class="nc" id="L109">        endpoint.setType(NotificationEndpointType.PAGERDUTY);</span>
<span class="nc" id="L110">        endpoint.setClientURL(clientURL);</span>
<span class="nc" id="L111">        endpoint.setRoutingKey(routingKey);</span>
<span class="nc" id="L112">        endpoint.orgID(orgID);</span>
<span class="nc" id="L113">        endpoint.setName(name);</span>
<span class="nc" id="L114">        endpoint.setStatus(NotificationEndpointBase.StatusEnum.ACTIVE);</span>

<span class="nc" id="L116">        return (PagerDutyNotificationEndpoint) createEndpoint(endpoint);</span>
    }

    @Nonnull
    @Override
    public HTTPNotificationEndpoint createHTTPEndpoint(@Nonnull final String name,
                                                       @Nonnull final String url,
                                                       @Nonnull final MethodEnum method,
                                                       @Nonnull final String orgID) {

<span class="nc" id="L126">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L127">        Arguments.checkNonEmpty(url, &quot;url&quot;);</span>
<span class="nc" id="L128">        Arguments.checkNotNull(method, &quot;method&quot;);</span>
<span class="nc" id="L129">        Arguments.checkNonEmpty(orgID, &quot;orgID&quot;);</span>

<span class="nc" id="L131">        HTTPNotificationEndpoint endpoint = new HTTPNotificationEndpoint();</span>
<span class="nc" id="L132">        endpoint.setType(NotificationEndpointType.HTTP);</span>
<span class="nc" id="L133">        endpoint.setMethod(method);</span>
<span class="nc" id="L134">        endpoint.setUrl(url);</span>
<span class="nc" id="L135">        endpoint.orgID(orgID);</span>
<span class="nc" id="L136">        endpoint.setName(name);</span>
<span class="nc" id="L137">        endpoint.setAuthMethod(HTTPNotificationEndpoint.AuthMethodEnum.NONE);</span>
<span class="nc" id="L138">        endpoint.setStatus(NotificationEndpointBase.StatusEnum.ACTIVE);</span>

<span class="nc" id="L140">        return (HTTPNotificationEndpoint) createEndpoint(endpoint);</span>
    }

    @Nonnull
    @Override
    public HTTPNotificationEndpoint createHTTPEndpointBasicAuth(@Nonnull final String name,
                                                                @Nonnull final String url,
                                                                @Nonnull final MethodEnum method,
                                                                @Nonnull final String username,
                                                                @Nonnull final String password,
                                                                @Nonnull final String orgID) {

<span class="nc" id="L152">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L153">        Arguments.checkNonEmpty(url, &quot;url&quot;);</span>
<span class="nc" id="L154">        Arguments.checkNotNull(method, &quot;method&quot;);</span>
<span class="nc" id="L155">        Arguments.checkNonEmpty(username, &quot;username&quot;);</span>
<span class="nc" id="L156">        Arguments.checkNonEmpty(password, &quot;password&quot;);</span>
<span class="nc" id="L157">        Arguments.checkNonEmpty(orgID, &quot;orgID&quot;);</span>

<span class="nc" id="L159">        HTTPNotificationEndpoint endpoint = new HTTPNotificationEndpoint();</span>
<span class="nc" id="L160">        endpoint.setType(NotificationEndpointType.HTTP);</span>
<span class="nc" id="L161">        endpoint.setMethod(method);</span>
<span class="nc" id="L162">        endpoint.setUrl(url);</span>
<span class="nc" id="L163">        endpoint.orgID(orgID);</span>
<span class="nc" id="L164">        endpoint.setName(name);</span>
<span class="nc" id="L165">        endpoint.setUsername(username);</span>
<span class="nc" id="L166">        endpoint.setPassword(password);</span>
<span class="nc" id="L167">        endpoint.setAuthMethod(HTTPNotificationEndpoint.AuthMethodEnum.BASIC);</span>
<span class="nc" id="L168">        endpoint.setStatus(NotificationEndpointBase.StatusEnum.ACTIVE);</span>

<span class="nc" id="L170">        return (HTTPNotificationEndpoint) createEndpoint(endpoint);</span>
    }

    @Nonnull
    @Override
    public HTTPNotificationEndpoint createHTTPEndpointBearer(@Nonnull final String name,
                                                             @Nonnull final String url,
                                                             @Nonnull final MethodEnum method,
                                                             @Nonnull final String token,
                                                             @Nonnull final String orgID) {

<span class="nc" id="L181">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L182">        Arguments.checkNonEmpty(url, &quot;url&quot;);</span>
<span class="nc" id="L183">        Arguments.checkNotNull(method, &quot;method&quot;);</span>
<span class="nc" id="L184">        Arguments.checkNonEmpty(token, &quot;token&quot;);</span>
<span class="nc" id="L185">        Arguments.checkNonEmpty(orgID, &quot;orgID&quot;);</span>

<span class="nc" id="L187">        HTTPNotificationEndpoint endpoint = new HTTPNotificationEndpoint();</span>
<span class="nc" id="L188">        endpoint.setType(NotificationEndpointType.HTTP);</span>
<span class="nc" id="L189">        endpoint.setMethod(method);</span>
<span class="nc" id="L190">        endpoint.setUrl(url);</span>
<span class="nc" id="L191">        endpoint.orgID(orgID);</span>
<span class="nc" id="L192">        endpoint.setName(name);</span>
<span class="nc" id="L193">        endpoint.setToken(token);</span>
<span class="nc" id="L194">        endpoint.setAuthMethod(HTTPNotificationEndpoint.AuthMethodEnum.BEARER);</span>
<span class="nc" id="L195">        endpoint.setStatus(NotificationEndpointBase.StatusEnum.ACTIVE);</span>

<span class="nc" id="L197">        return (HTTPNotificationEndpoint) createEndpoint(endpoint);</span>
    }

    @Override
    @Nonnull
    public NotificationEndpoint createEndpoint(@Nonnull final NotificationEndpoint notificationEndpoint) {

<span class="nc" id="L204">        Arguments.checkNotNull(notificationEndpoint, &quot;notificationEndpoint&quot;);</span>

<span class="nc" id="L206">        Call&lt;NotificationEndpoint&gt; endpointCall = service</span>
<span class="nc" id="L207">                .createNotificationEndpoint(notificationEndpoint);</span>

<span class="nc" id="L209">        return execute(endpointCall);</span>
    }

    @Nonnull
    @Override
    public NotificationEndpoint updateEndpoint(@Nonnull final NotificationEndpoint notificationEndpoint) {

<span class="nc" id="L216">        Arguments.checkNotNull(notificationEndpoint, &quot;notificationEndpoint&quot;);</span>

<span class="nc" id="L218">        NotificationEndpointUpdate update = new NotificationEndpointUpdate()</span>
<span class="nc" id="L219">                .name(notificationEndpoint.getName())</span>
<span class="nc" id="L220">                .description(notificationEndpoint.getDescription())</span>
<span class="nc" id="L221">                .status(NotificationEndpointUpdate.StatusEnum.fromValue(notificationEndpoint.getStatus().getValue()));</span>

<span class="nc" id="L223">        return updateEndpoint(notificationEndpoint.getId(), update);</span>
    }

    @Nonnull
    @Override
    public NotificationEndpoint updateEndpoint(@Nonnull final String endpointID,
                                               @Nonnull final NotificationEndpointUpdate notificationEndpointUpdate) {

<span class="nc" id="L231">        Arguments.checkNonEmpty(endpointID, &quot;endpointID&quot;);</span>
<span class="nc" id="L232">        Arguments.checkNotNull(notificationEndpointUpdate, &quot;notificationEndpointUpdate&quot;);</span>

<span class="nc" id="L234">        Call&lt;NotificationEndpoint&gt; endpointCall = service</span>
<span class="nc" id="L235">                .patchNotificationEndpointsID(endpointID, notificationEndpointUpdate, null);</span>

<span class="nc" id="L237">        return execute(endpointCall);</span>
    }

    @Override
    public void deleteNotificationEndpoint(@Nonnull final NotificationEndpoint notificationEndpoint) {

<span class="nc" id="L243">        Arguments.checkNotNull(notificationEndpoint, &quot;notificationEndpoint&quot;);</span>

<span class="nc" id="L245">        deleteNotificationEndpoint(notificationEndpoint.getId());</span>
<span class="nc" id="L246">    }</span>

    @Override
    public void deleteNotificationEndpoint(@Nonnull final String endpointID) {

<span class="nc" id="L251">        Arguments.checkNonEmpty(endpointID, &quot;endpointID&quot;);</span>

<span class="nc" id="L253">        Call&lt;Void&gt; endpointCall = service</span>
<span class="nc" id="L254">                .deleteNotificationEndpointsID(endpointID, null);</span>

<span class="nc" id="L256">        execute(endpointCall);</span>
<span class="nc" id="L257">    }</span>

    @Nonnull
    @Override
    public List&lt;NotificationEndpoint&gt; findNotificationEndpoints(@Nonnull final String orgID) {

<span class="nc" id="L263">        Arguments.checkNonEmpty(orgID, &quot;orgID&quot;);</span>

<span class="nc" id="L265">        return findNotificationEndpoints(orgID, new FindOptions()).getNotificationEndpoints();</span>
    }

    @Nonnull
    @Override
    public NotificationEndpoints findNotificationEndpoints(@Nonnull final String orgID,
                                                           @Nonnull final FindOptions findOptions) {

<span class="nc" id="L273">        Arguments.checkNonEmpty(orgID, &quot;orgID&quot;);</span>
<span class="nc" id="L274">        Arguments.checkNotNull(findOptions, &quot;findOptions&quot;);</span>

<span class="nc" id="L276">        Call&lt;NotificationEndpoints&gt; endpointCall = service</span>
<span class="nc" id="L277">                .getNotificationEndpoints(orgID, null, findOptions.getOffset(), findOptions.getLimit());</span>

<span class="nc" id="L279">        return execute(endpointCall);</span>
    }

    @Nonnull
    @Override
    public SlackNotificationEndpoint cloneSlackEndpoint(@Nonnull final String name,
                                                        @Nullable final String token,
                                                        @Nonnull final String endpointID) {

<span class="nc" id="L288">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L289">        Arguments.checkNotNull(endpointID, &quot;endpointID&quot;);</span>

<span class="nc" id="L291">        return cloneSlackEndpoint(name, token, (SlackNotificationEndpoint) findNotificationEndpointByID(endpointID));</span>
    }

    @Nonnull
    @Override
    public SlackNotificationEndpoint cloneSlackEndpoint(@Nonnull final String name,
                                                        @Nullable final String token,
                                                        @Nonnull final SlackNotificationEndpoint endpoint) {

<span class="nc" id="L300">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L301">        Arguments.checkNotNull(endpoint, &quot;endpoint&quot;);</span>

<span class="nc" id="L303">        SlackNotificationEndpoint cloned = new SlackNotificationEndpoint()</span>
<span class="nc" id="L304">                .url(endpoint.getUrl())</span>
<span class="nc" id="L305">                .token(token);</span>

<span class="nc" id="L307">        return (SlackNotificationEndpoint) cloneEndpoint(name, endpoint, cloned);</span>
    }

    @Nonnull
    @Override
    public PagerDutyNotificationEndpoint clonePagerDutyEndpoint(@Nonnull final String name,
                                                                @Nonnull final String routingKey,
                                                                @Nonnull final String endpointID) {

<span class="nc" id="L316">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L317">        Arguments.checkNonEmpty(routingKey, &quot;routingKey&quot;);</span>
<span class="nc" id="L318">        Arguments.checkNonEmpty(endpointID, &quot;endpointID&quot;);</span>

<span class="nc" id="L320">        return clonePagerDutyEndpoint(name, routingKey,</span>
<span class="nc" id="L321">                (PagerDutyNotificationEndpoint) findNotificationEndpointByID(endpointID));</span>
    }

    @Nonnull
    @Override
    public PagerDutyNotificationEndpoint clonePagerDutyEndpoint(@Nonnull final String name,
                                                                @Nonnull final String routingKey,
                                                                @Nonnull final PagerDutyNotificationEndpoint endpoint) {

<span class="nc" id="L330">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L331">        Arguments.checkNonEmpty(routingKey, &quot;routingKey&quot;);</span>
<span class="nc" id="L332">        Arguments.checkNotNull(endpoint, &quot;endpoint&quot;);</span>

<span class="nc" id="L334">        PagerDutyNotificationEndpoint cloned = new PagerDutyNotificationEndpoint()</span>
<span class="nc" id="L335">                .clientURL(endpoint.getClientURL())</span>
<span class="nc" id="L336">                .routingKey(routingKey);</span>

<span class="nc" id="L338">        return (PagerDutyNotificationEndpoint) cloneEndpoint(name, endpoint, cloned);</span>
    }

    @Nonnull
    @Override
    public HTTPNotificationEndpoint cloneHTTPEndpoint(@Nonnull final String name, @Nonnull final String endpointID) {

<span class="nc" id="L345">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L346">        Arguments.checkNonEmpty(endpointID, &quot;endpointID&quot;);</span>

<span class="nc" id="L348">        return cloneHTTPEndpoint(name, (HTTPNotificationEndpoint) findNotificationEndpointByID(endpointID));</span>
    }

    @Nonnull
    @Override
    public HTTPNotificationEndpoint cloneHTTPEndpoint(@Nonnull final String name,
                                                      @Nonnull final HTTPNotificationEndpoint endpoint) {

<span class="nc" id="L356">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L357">        Arguments.checkNotNull(endpoint, &quot;endpoint&quot;);</span>

<span class="nc" id="L359">        HTTPNotificationEndpoint cloned = new HTTPNotificationEndpoint()</span>
<span class="nc" id="L360">                .url(endpoint.getUrl())</span>
<span class="nc" id="L361">                .method(endpoint.getMethod())</span>
<span class="nc" id="L362">                .authMethod(HTTPNotificationEndpoint.AuthMethodEnum.NONE)</span>
<span class="nc" id="L363">                .contentTemplate(endpoint.getContentTemplate())</span>
<span class="nc" id="L364">                .headers(endpoint.getHeaders());</span>

<span class="nc" id="L366">        return (HTTPNotificationEndpoint) cloneEndpoint(name, endpoint, cloned);</span>
    }


    @Nonnull
    @Override
    public HTTPNotificationEndpoint cloneHTTPEndpointBasicAuth(@Nonnull final String name,
                                                               @Nonnull final String username,
                                                               @Nonnull final String password,
                                                               @Nonnull final String endpointID) {

<span class="nc" id="L377">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L378">        Arguments.checkNonEmpty(username, &quot;username&quot;);</span>
<span class="nc" id="L379">        Arguments.checkNonEmpty(password, &quot;password&quot;);</span>
<span class="nc" id="L380">        Arguments.checkNonEmpty(endpointID, &quot;endpointID&quot;);</span>

<span class="nc" id="L382">        return cloneHTTPEndpointBasicAuth(name, username, password,</span>
<span class="nc" id="L383">                (HTTPNotificationEndpoint) findNotificationEndpointByID(endpointID));</span>
    }

    @Nonnull
    @Override
    public HTTPNotificationEndpoint cloneHTTPEndpointBasicAuth(@Nonnull final String name,
                                                               @Nonnull final String username,
                                                               @Nonnull final String password,
                                                               @Nonnull final HTTPNotificationEndpoint endpoint) {

<span class="nc" id="L393">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L394">        Arguments.checkNonEmpty(username, &quot;username&quot;);</span>
<span class="nc" id="L395">        Arguments.checkNonEmpty(password, &quot;password&quot;);</span>
<span class="nc" id="L396">        Arguments.checkNotNull(endpoint, &quot;endpoint&quot;);</span>

<span class="nc" id="L398">        HTTPNotificationEndpoint cloned = new HTTPNotificationEndpoint()</span>
<span class="nc" id="L399">                .url(endpoint.getUrl())</span>
<span class="nc" id="L400">                .username(username)</span>
<span class="nc" id="L401">                .password(password)</span>
<span class="nc" id="L402">                .method(endpoint.getMethod())</span>
<span class="nc" id="L403">                .authMethod(HTTPNotificationEndpoint.AuthMethodEnum.BASIC)</span>
<span class="nc" id="L404">                .contentTemplate(endpoint.getContentTemplate())</span>
<span class="nc" id="L405">                .headers(endpoint.getHeaders());</span>

<span class="nc" id="L407">        return (HTTPNotificationEndpoint) cloneEndpoint(name, endpoint, cloned);</span>
    }

    @Nonnull
    @Override
    public HTTPNotificationEndpoint cloneHTTPEndpointBearer(@Nonnull final String name,
                                                            @Nonnull final String token,
                                                            @Nonnull final String endpointID) {

<span class="nc" id="L416">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L417">        Arguments.checkNonEmpty(token, &quot;token&quot;);</span>
<span class="nc" id="L418">        Arguments.checkNonEmpty(endpointID, &quot;endpointID&quot;);</span>

<span class="nc" id="L420">        return cloneHTTPEndpointBearer(name, token,</span>
<span class="nc" id="L421">                (HTTPNotificationEndpoint) findNotificationEndpointByID(endpointID));</span>
    }

    @Nonnull
    @Override
    public HTTPNotificationEndpoint cloneHTTPEndpointBearer(@Nonnull final String name,
                                                            @Nonnull final String token,
                                                            @Nonnull final HTTPNotificationEndpoint endpoint) {

<span class="nc" id="L430">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L431">        Arguments.checkNonEmpty(token, &quot;token&quot;);</span>
<span class="nc" id="L432">        Arguments.checkNotNull(endpoint, &quot;endpoint&quot;);</span>

<span class="nc" id="L434">        HTTPNotificationEndpoint cloned = new HTTPNotificationEndpoint().url(endpoint.getUrl())</span>
<span class="nc" id="L435">                .token(token)</span>
<span class="nc" id="L436">                .method(endpoint.getMethod())</span>
<span class="nc" id="L437">                .authMethod(HTTPNotificationEndpoint.AuthMethodEnum.BEARER)</span>
<span class="nc" id="L438">                .contentTemplate(endpoint.getContentTemplate())</span>
<span class="nc" id="L439">                .headers(endpoint.getHeaders());</span>

<span class="nc" id="L441">        return (HTTPNotificationEndpoint) cloneEndpoint(name, endpoint, cloned);</span>
    }

    @Nonnull
    private NotificationEndpoint cloneEndpoint(@Nonnull final String name,
                                               @Nonnull final NotificationEndpoint toCloneEndpoint,
                                               @Nonnull final NotificationEndpoint clonedEndpoint) {

<span class="nc" id="L449">        Arguments.checkNonEmpty(name, &quot;name&quot;);</span>
<span class="nc" id="L450">        Arguments.checkNotNull(toCloneEndpoint, &quot;notificationEndpoint&quot;);</span>

<span class="nc" id="L452">        clonedEndpoint</span>
<span class="nc" id="L453">                .name(name)</span>
<span class="nc" id="L454">                .orgID(toCloneEndpoint.getOrgID())</span>
<span class="nc" id="L455">                .description(toCloneEndpoint.getDescription())</span>
<span class="nc" id="L456">                .status(toCloneEndpoint.getStatus())</span>
<span class="nc" id="L457">                .type(toCloneEndpoint.getType());</span>

<span class="nc" id="L459">        NotificationEndpoint created = createEndpoint(clonedEndpoint);</span>

<span class="nc" id="L461">        getLabels(created).forEach(label -&gt; addLabel(label, created));</span>

<span class="nc" id="L463">        return created;</span>
    }

    @Nonnull
    @Override
    public NotificationEndpoint findNotificationEndpointByID(@Nonnull final String endpointID) {

<span class="nc" id="L470">        Arguments.checkNonEmpty(endpointID, &quot;endpointID&quot;);</span>

<span class="nc" id="L472">        Call&lt;NotificationEndpoint&gt; endpointCall = service</span>
<span class="nc" id="L473">                .getNotificationEndpointsID(endpointID, null);</span>

<span class="nc" id="L475">        return execute(endpointCall);</span>
    }

    @Nonnull
    @Override
    public List&lt;Label&gt; getLabels(@Nonnull final NotificationEndpoint endpoint) {

<span class="nc" id="L482">        Arguments.checkNotNull(endpoint, &quot;endpoint&quot;);</span>

<span class="nc" id="L484">        return getLabels(endpoint.getId());</span>
    }

    @Nonnull
    @Override
    public List&lt;Label&gt; getLabels(@Nonnull final String endpointID) {

<span class="nc" id="L491">        Arguments.checkNonEmpty(endpointID, &quot;endpointID&quot;);</span>

<span class="nc" id="L493">        Call&lt;LabelsResponse&gt; call = service.getNotificationEndpointsIDLabels(endpointID, null);</span>

<span class="nc" id="L495">        return execute(call).getLabels();</span>
    }

    @Nonnull
    @Override
    public LabelResponse addLabel(@Nonnull final Label label, @Nonnull final NotificationEndpoint endpoint) {

<span class="nc" id="L502">        Arguments.checkNotNull(label, &quot;label&quot;);</span>
<span class="nc" id="L503">        Arguments.checkNotNull(endpoint, &quot;endpoint&quot;);</span>

<span class="nc" id="L505">        return addLabel(label.getId(), endpoint.getId());</span>
    }

    @Nonnull
    @Override
    public LabelResponse addLabel(@Nonnull final String labelID, @Nonnull final String endpointID) {

<span class="nc" id="L512">        Arguments.checkNonEmpty(labelID, &quot;labelID&quot;);</span>
<span class="nc" id="L513">        Arguments.checkNonEmpty(endpointID, &quot;endpointID&quot;);</span>

<span class="nc" id="L515">        LabelMapping labelMapping = new LabelMapping();</span>
<span class="nc" id="L516">        labelMapping.setLabelID(labelID);</span>

<span class="nc" id="L518">        Call&lt;LabelResponse&gt; call = service.postNotificationEndpointIDLabels(endpointID, labelMapping, null);</span>

<span class="nc" id="L520">        return execute(call);</span>
    }

    @Override
    public void deleteLabel(@Nonnull final Label label, @Nonnull final NotificationEndpoint endpoint) {

<span class="nc" id="L526">        Arguments.checkNotNull(label, &quot;label&quot;);</span>
<span class="nc" id="L527">        Arguments.checkNotNull(endpoint, &quot;bucket&quot;);</span>

<span class="nc" id="L529">        deleteLabel(label.getId(), endpoint.getId());</span>
<span class="nc" id="L530">    }</span>

    @Override
    public void deleteLabel(@Nonnull final String labelID, @Nonnull final String endpointID) {

<span class="nc" id="L535">        Arguments.checkNonEmpty(labelID, &quot;labelID&quot;);</span>
<span class="nc" id="L536">        Arguments.checkNonEmpty(endpointID, &quot;endpointID&quot;);</span>

<span class="nc" id="L538">        Call&lt;Void&gt; call = service.deleteNotificationEndpointsIDLabelsID(endpointID, labelID, null);</span>
<span class="nc" id="L539">        execute(call);</span>
<span class="nc" id="L540">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>